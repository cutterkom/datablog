---
title: Create Multiple .Rmd Reports with Input from Dataframe
author: Katharina Brunner
date: '2018-02-23'
slug: create-multiple-rmd-reports-with-input-from-dataframe
categories:
  - R
  - Workflow
tags:
  - knitr
  - Rmd
  - R Markdown
  - reports
---



<p>At <a href="http://sz.de">SÃ¼ddeutsche Zeitung</a> I work a lot with HTML-files generated by <code>.Rmd</code>-files. Sometimes there is the case that I want to generate similar looking HTML-files with input from a dataframe.</p>
<p>As an example I want to create two HTML-files containing one name. The names are stored in a dataframe. This can be solved with two pieces of code:</p>
<p>You need two files:</p>
<ul>
<li>an <code>.R</code>-script for accessing and rendering</li>
<li>an <code>.Rmd</code>-file for creating the HTML-file</li>
</ul>
<div id="the-.r-script" class="section level2">
<h2>1. The <code>.R</code>-script</h2>
<pre class="r"><code>library(rmarkdown)
library(dplyr)

# dataframe with two names
df &lt;- data.frame(name = c(&quot;Katharina&quot;, &quot;Theresa&quot;))

# loop over dataframe in order to access every row and render an .Rmd-file
for (i in 1:nrow(df)) {
  
  # get the specific row
  name &lt;- df %&gt;% select(name) %&gt;% slice(i)
  
  # start rendering the HTML-file, 
  rmarkdown::render(&#39;index.Rmd&#39;, output_file =  paste0(&quot;report_&quot;, name, &quot;.html&quot;), output_dir = &#39;html_files&#39;)
    
}</code></pre>
</div>
<div id="the-.rmd-file" class="section level2">
<h2>2. The <code>.Rmd-file</code></h2>
<p>I exclude almost all meta information in order to get a plain HTML-page.</p>
<pre class="r"><code>
  ---
  name: &quot;&quot;
  author: &quot;&quot;
  output:
    html_document:
      theme: null
      self_contained: no
      highlight: null
      mathjax: null
  ---

  # you have to uncomment the next line
  ``` #{r, results=&#39;asis&#39;, echo=FALSE, warning=F, message=F}

  # Create HTML-Text and Elements
  cat(paste0(&quot;&lt;h2&gt;&quot;, name, &quot;&lt;h2&quot;))


  ```
</code></pre>
</div>
<div id="the-result" class="section level2">
<h2>The result</h2>
<p>These scripts result in two HTML-files, each containing one <code>&lt;h2&gt;</code>-tag with data from a dataframe.</p>
<p>Example:</p>
<pre class="r"><code>
&lt;!DOCTYPE html&gt;

&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;

&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
  &lt;meta name=&quot;generator&quot; content=&quot;pandoc&quot; /&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
  &lt;title&gt;&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h2&gt;Katharina&lt;/h2&gt;

&lt;/body&gt;
&lt;/html&gt;

</code></pre>
</div>
