---
title: Create Multiple .Rmd Reports with Input from Dataframe
author: Katharina Brunner
date: '2018-02-23'
slug: create-multiple-rmd-reports-with-input-from-dataframe
categories:
  - R
  - Workflow
tags:
  - knitr
  - Rmd
  - R Markdown
  - reports
---

At [SÃ¼ddeutsche Zeitung](http://sz.de) I work a lot with HTML-files generated by `.Rmd`-files. Sometimes I want to generate similar looking HTML-files with input from a dataframe.

As an example I want to create two HTML-files containing one name. The names are stored in a dataframe. 
This can be solved with two pieces of code: 

You need two files: 

* an `.R`-script for accessing and rendering
* an `.Rmd`-file for creating the HTML-file

## 1. The `.R`-script

```r
library(rmarkdown)
library(dplyr)

# dataframe with two names
df <- data.frame(name = c("Katharina", "Theresa"))

# loop over dataframe in order to access every row and render an .Rmd-file
for (i in 1:nrow(df)) {
  
  # get the specific row
  name <- df %>% select(name) %>% slice(i)
  
  # start rendering the HTML-file, 
  rmarkdown::render('index.Rmd', output_file =  paste0("report_", name, ".html"), output_dir = 'html_files')
    
}
```


## 2. The `.Rmd-file`

I exclude almost all meta information in order to get a plain HTML-page.

```r

  ---
  name: ""
  author: ""
  output:
    html_document:
      theme: null
      self_contained: no
      highlight: null
      mathjax: null
  ---

  # you have to uncomment the next line
  ``` #{r, results='asis', echo=FALSE, warning=F, message=F}

  # Create HTML-Text and Elements
  cat(paste0("<h2>", name, "<h2"))


  ```

```

## 3. The result

These scripts result in two HTML-files, each containing one `<h2>`-tag with data from a dataframe.

Example: 

```r

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" type="text/css" />
</head>

<body>

<h2>Katharina</h2>

</body>
</html>


```

